<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start">
    	<ion-back-button></ion-back-button>
    </ion-buttons>
		<ion-title>Profile</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content padding>
	<ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
	    <ion-refresher-content
	      pullingIcon="arrow-dropdown"
	      pullingText="Pull to refresh"
	      refreshingSpinner="circles"
	      refreshingText="Refreshing...">
	    </ion-refresher-content>
	</ion-refresher>
	<ion-card >
		<ion-row>
			<ion-col  size="9" style="font-weight: bold;text-align: center;" (click)="update()">
				<ion-icon name="create" style="font-size: 18px"></ion-icon> {{ customer_info['name'] }} - {{ customer_info.code }}
			</ion-col>
			<ion-col size="2">
				<ion-button color="white" fill="clear" style="margin-top: -9px;"  href="tel: {{ customer_info.phone_number }}">
					<ion-icon src="assets/svg/phone.svg" slot="icon-only" ></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size='1'></ion-col>
		</ion-row>
		<ion-row style="height: 31px">
			<ion-col size="9" style="text-align:center;">
				{{ customer_info.door_number }} - {{ customer_info.community }}
			</ion-col>
			<ion-col size="2">
				<ion-button color="white" fill="clear" style="height: 26px;margin-top: -13px;">
					<ion-icon src="assets/svg/gps.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size='1'></ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="1"></ion-col>
			<ion-col size="6" [style.color]="balcheckout(customer_info.balance_amount)"> 	
				<span style="font-weight: bold;">Balance : </span>{{ customer_info['balance_amount']  | number: '.2'}}
			</ion-col>
			<ion-col size="5" [style.color]="checkVesselCount(customer_info.vessel_count)">
				<span style="font-weight: bold;" >Vessel: </span>{{ customer_info['vessel_count'] }}
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="3" style="text-align: center;">
				<ion-button color="white" fill="clear" (click)="openModal(customer_info)">
					<ion-icon src="assets/svg/prodPref.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size="3" style="text-align: center;">
				<ion-button color="white" fill="clear"  (click)="openOrderModal(customer_info)">
					<ion-icon src="assets/svg/order.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size="3" style="text-align: center;">
				<ion-button color="white" fill="clear" (click)="openDeliveryModal(customer_info)">
					<ion-icon src="assets/svg/history.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size="3" style="text-align: center;">
				<ion-button color="white" fill="clear" (click)="paymentPage(customer_info)">
					<ion-icon src="assets/svg/transaction.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
		</ion-row>
		
	</ion-card>
	<ion-card >
		<ion-row style="font-weight: bold;font-size:12px;">
			<ion-col size="3">Date</ion-col>
			<ion-col size="5" >Description</ion-col>
			<ion-col size="4"><span style="color:green">Credit</span>/<span style="color:red">Debit</span></ion-col>
			
		</ion-row>
		<span *ngFor="let date of date_values">
			<ion-row *ngFor="let transaction of sale_datas[date]" style="font-size:11px;">
				<ion-col size="3">{{ transaction.date | date:'dd-MMM'}}</ion-col>
				<ion-col size="5" text-wrap>{{ transaction.description }}</ion-col>
				<ion-col size="3" style="text-align: end">
					<span  *ngIf="transaction.type == 'payment'" style="color:green">
						{{ transaction.amount | number: '.2' }}
					</span>
					<span  *ngIf="transaction.type == 'sale'" style="color:red">
						{{ transaction.amount | number: '.2' }}
					</span>
				</ion-col>
				<ion-col size="1" style="text-align:left,font-size:14px">
					<span [style.color]="statusColor(transaction.status_id)">
						<ion-icon slot="end" [name]="transaction.status_id == 5  ? 'remove' : 'done-all'"></ion-icon>
					</span>
				</ion-col>
			</ion-row>
		</span>
	</ion-card>
</ion-content>
