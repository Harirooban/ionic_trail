<ion-header>
  <ion-toolbar>
  	<ion-buttons slot="start">
  		<ion-menu-button>
  		</ion-menu-button>
  	</ion-buttons>
    <ion-title>Customer</ion-title>
		<ion-buttons slot="end">
			<ion-button color="primary" shape="round" (click)="newCustomer()">
				add
			</ion-button>
		</ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
	<ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
	    <ion-refresher-content
	      pullingIcon="arrow-dropdown"
	      pullingText="Pull to refresh"
	      refreshingSpinner="circles"
	      refreshingText="Refreshing...">
	    </ion-refresher-content>
	</ion-refresher>
	<ion-row>
		<ion-col style="text-align: center;">
			<ion-searchbar #search_term placeholder="name/area/door.no"></ion-searchbar>
		</ion-col>
	</ion-row>
	<ion-card *ngFor ="let customer of customer_datas | customerFilter:search_term.value">
		<ion-row style="height: 42px;">
			<ion-col size="9"  padding style="font-weight: bold;text-align: center;" (click)="profilePage(customer)">
				 <span style="text-transform: capitalize;"> {{ customer.name }} </span> - {{ customer.code }}
			</ion-col>
			<ion-col size="3">
				<a color="white" fill="clear"  href="tel: {{ customer.phone_number }}" class="button">
					<ion-icon src="assets/svg/phone.svg" slot="icon-only" style="font-size: 30px" ></ion-icon>
				</a>
			</ion-col>
		</ion-row>
		<ion-row style="height: 31px">
			<ion-col size="9" style="text-align: center;">
				{{ customer.community }}- {{ customer.door_number }}
			</ion-col>
			<ion-col size="3">
				<!-- href="geo:?q={{ customer.latitude+','+customer.longitude }}" -->
				<a color="white" fill="clear"class="button" href="geo:?q=11.016844,76.955833">
					<ion-icon src="assets/svg/gps.svg" slot="icon-only" style="font-size: 30px" ></ion-icon>
				</a>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="6" style="text-align: center;" [style.color]="balcheckout(customer.balance_amount)"> 	
				<span style="font-weight: bold;">Balance : </span>{{ customer.balance_amount }}
			</ion-col>
			<ion-col size="6" style="text-align: center;" [style.color]="checkVesselCount(customer.vessel_count)">
				<span style="font-weight: bold;" >Vessel: </span>{{ customer.vessel_count }}
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="3">
				<ion-button color="white" fill="clear" (click)="openModal(customer)">
					<ion-icon src="assets/svg/prodPref.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size="3">
				<ion-button color="white" fill="clear"  (click)="openOrderModal(customer)">
					<ion-icon src="assets/svg/order.svg" slot="icon-only"></ion-icon>
				</ion-button>
			</ion-col>
			<ion-col size="3">
				<ion-button color="white" fill="clear" (click)="openDeliveryModal(customer)" id="notification-button">
					<ion-icon  src="assets/svg/no_sale.svg" slot="icon-only"></ion-icon>
					<ion-badge style="margin-top:-21px;margin-left: -7px;font-size: 11px;"[color]=" customer.sale_count == 0 ? 'success' : 'danger'" >
					{{ customer.sale_count }}</ion-badge>
				</ion-button>
		</ion-col>
			<ion-col size="3">
				<ion-button color="white" fill="clear" (click)="profilePage(customer)">
					<ion-icon src="assets/svg/profile.svg" slot="icon-only"></ion-icon>
				</ion-button>
	 	</ion-col>
		</ion-row>
	</ion-card>
</ion-content>
